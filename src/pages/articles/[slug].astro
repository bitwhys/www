---
import { getCollection, getEntry, render } from "astro:content"
import BaseLayout from "../../layouts/BaseLayout.astro"

export async function getStaticPaths() {
  // TODO
  const articles = await getCollection("articles")
  return articles.map(({ id }) => ({
    params: { slug: id },
  }))
}

const { slug } = Astro.params
const article = await getEntry("articles", slug)
const { Content, headings } = await render(article!)
console.log(headings)
---

<BaseLayout>
  <div
    id="blurr-effect"
    class="sticky top-0 z-40 h-16 [background:linear-gradient(var(--color-pagebg-secondary),70%,transparent)]"
  >
  </div>
  <main class="pt-24 text-base">
    <h1 class="font-headings mb-8 text-center text-5xl">
      {article?.data.title}
    </h1>
    <article
      class="prose prose-headings:font-headings dark:prose-invert max-w-none"
    >
      <Content />
    </article>
  </main>
</BaseLayout>
